<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Sans font</title>
    <link rel="stylesheet" href="/css/styles.css">

</head>
<body>
    <div id="controller">
        <div class="edit">
            <p class="l-text"></p>
            <div class="size-wrapper">
                <img src="icons/Size.svg"/>
                <input type="range" class="slider" id="font-size" step="0.1" value="226" min="20" max="226">
                <p class="sm-text">67px</p>
            </div>
            <div class="size-wrapper">
                <img src="icons/Line.svg"/>
                <input type="range" class="slider" id="line-height" step="0.1" min="1" max="4">
                <p class="sm-text">67px</p>
            </div>
            <div class="size-wrapper">
                <img src="icons/Letter.svg"/>
                <input type="range" class="slider" id="letter-spacing" step="0.1" value="0" min="0" max="20">
                <p class="sm-text">67px</p>
            </div>
<!--             <h1 id="hej">Test</h1>
            <h1 id="hej2">Test</h1>
            <h1 id="hej3">Test</h1>
            <h1 id="hej4">Test</h1> -->
            <button id="req" >Request orientation permission</button>
            <button id="remove" onclick="removeHandler()">Remove</button>
<!--             <div class="test">
                <div class="btn">Letter</div>
                <div class="btn">Number</div>
                <div class="btn">Word</div>
                <div class="btn">Title</div>
            </div>
            <div class="test">
                <div class="btn">Sentence</div>
                <div class="btn">Pangam</div>
                <div class="btn">Text</div>
                <div class="btn">Set</div>
            </div> -->
            

        </div>
    </div>
    <div id="edit" onclick="toggleIcon()">
        <img src="icons/Controller.svg"/>
    </div>
    <div id="editable" contenteditable="true" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
       Untitled <br> Sans.
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script>
    document.getElementById('letter-spacing').value = 0;
    document.getElementById('font-size').value = 82;
    document.getElementById('line-height').value = 1;

    
    var i = -1;
    function toggleIcon() {
        i++;
        if (i == 0) {
            document.getElementById('edit').innerHTML = "";
            document.getElementById('edit').innerHTML = "<svg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M1 19.0312L19.0312 0.999997' stroke='black' stroke-width='2'/><path d='M1 1L19.0312 19.0312' stroke='black' stroke-width='2'/></svg>";
        }
        else if (i == 1) {
            document.getElementById('edit').innerHTML = "";
            document.getElementById('edit').innerHTML = "<svg width='26' height='26' viewBox='0 0 26 26' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M0 4H25.5' stroke='black' stroke-width='2'/><circle cx='5' cy='4' r='4' fill='black'/><circle cx='5' cy='4' r='2' fill='#cecece'/><path d='M0 13H25.5' stroke='black' stroke-width='2'/><circle cx='13' cy='13' r='4' fill='black'/><circle cx='13' cy='13' r='2' fill='#cecece'/><path d='M0 22H25.5' stroke='black' stroke-width='2'/><circle cx='20' cy='22' r='4' fill='black'/><circle cx='20' cy='22' r='2' fill='#cecece'/></svg>";
            i = -1; 
        }
    }

    var tl = gsap.timeline();

    tl.to("#editable", {
        height: "50%",
        ease: "Power4. easeOut",
    }, "start");

    tl.to("#controller", {
        top: "50vh",
        opacity: 1,
        ease: "Power4. easeOut",
    }, "start");

    tl.to("#edit", {
        top: "calc(50vh - 58px)",
    }, "start");

    tl.reverse();

    function menu() {
        tl.reversed(!tl.reversed());
    }

    document.getElementById("edit").addEventListener("click", menu); 

    let letterSpacing = document.getElementById('letter-spacing');
    letterSpacing.addEventListener('input', function () {
        document.getElementById('editable').style.letterSpacing = letterSpacing.value+"px";
    }, false);

    let lineHeight = document.getElementById('line-height');
    lineHeight.addEventListener('input', function () {
        document.getElementById('editable').style.lineHeight = lineHeight.value;
    }, false);

    let fontSize = document.getElementById('font-size');
    fontSize.addEventListener('input', function () {
        document.getElementById('editable').style.fontSize = fontSize.value+"px";
    }, false);
	


    function f() {
        const alpha = event.alpha;
        const beta = Math.abs(event.beta);

        // debugging purposes only:
/*         document.getElementById("hej").innerHTML = Math.round(alpha); 
        document.getElementById("hej2").innerHTML =  Math.round((beta / 180) * 100);

        document.getElementById("hej3").innerHTML =  (180 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        document.getElementById("hej4").innerHTML =  (50 + Math.round((beta/ 180) * 100)) % 100;  */
        
        var bgHue = Math.round(alpha); 
        var bgLightness =  Math.round((beta / 180) * 100); 

        var colorHue = (180 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        var colorLightness =  (50 + Math.round((beta/ 180) * 100)) % 100; 
        

        document.documentElement.style.setProperty("--color", `hsl(${colorHue}, 100%, ${colorLightness}%)`);
        document.documentElement.style.setProperty("--bg", `hsl(${bgHue}, 100%, ${bgLightness}%)`);

    }
	
    function requestOrientationPermission(){
        DeviceOrientationEvent.requestPermission()
        .then(response => {
            if (response == 'granted') {
                window.addEventListener('deviceorientation', f)
            }
        })
        .catch(console.error)
    }

    document.getElementById("req").addEventListener("click", requestOrientationPermission);

    function removeHandler() {
        console.log('fire');
        window.removeEventListener('deviceorientation', f);
        document.documentElement.style.setProperty("--color", `#000`);
        document.documentElement.style.setProperty("--bg", `#cecece`);

    }






	







</script>
</body>
</html>
