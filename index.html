<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Sans font</title>
    <link rel="stylesheet" href="css/styles.css" />

</head>
<body>
    <div id="controller">
        <div class="edit">
            <p class="l-text"></p>
            <div class="size-wrapper">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_7_54)">
                    <rect width="28" height="28" fill=""/>
                    <path d="M14.352 28H17.616L10.728 10.864H7.152L0.264 28H3.384L5.016 23.8H12.744L14.352 28ZM8.88 13.936H8.952L11.784 21.328H6L8.88 13.936Z" fill="var(--color)"/>
                    <path d="M26.372 28H28.276L24.258 18.004H22.172L18.154 28H19.974L20.926 25.55H25.434L26.372 28ZM23.18 19.796H23.222L24.874 24.108H21.5L23.18 19.796Z" fill="var(--color)"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_7_54">
                    <rect width="28" height="28" fill=""/>
                    </clipPath>
                    </defs>
                </svg>
                <input type="range" class="slider" id="font-size" step="0.1" value="226" min="20" max="226">
                <p class="sm-text">67px</p>
            </div>
            <div class="size-wrapper">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_7_60)">
                    <rect width="28" height="28" fill=""/>
                    <path d="M19.352 28H22.616L15.728 10.864H12.152L5.264 28H8.384L10.016 23.8H17.744L19.352 28ZM13.88 13.936H13.952L16.784 21.328H11L13.88 13.936Z" fill="var(--color)"/>
                    <line x1="23" y1="7.5" x2="5" y2="7.5" stroke="var(--color)"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_7_60">
                    <rect width="28" height="28" fill=""/>
                    </clipPath>
                    </defs>
                </svg>
                    
                <input type="range" class="slider" id="line-height" step="0.1" min="1" max="4">
                <p class="sm-text">67px</p>
            </div>
            <div class="size-wrapper">
                <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_7_59)">
                    <rect width="28" height="28" fill=""/>
                    <path d="M19.352 28H22.616L15.728 10.864H12.152L5.264 28H8.384L10.016 23.8H17.744L19.352 28ZM13.88 13.936H13.952L16.784 21.328H11L13.88 13.936Z" fill="var(--color)"/>
                    <line x1="2.5" y1="10" x2="2.5" y2="28" stroke="var(--color)"/>
                    <line x1="25.5" y1="10" x2="25.5" y2="28" stroke="var(--color)"/>
                    </g>
                    <defs>
                    <clipPath id="clip0_7_59">
                    <rect width="28" height="28" fill=""/>
                    </clipPath>
                    </defs>
                </svg>
                <input type="range" class="slider" id="letter-spacing" step="0.1" value="0" min="0" max="20">
                <p class="sm-text">67px</p>
            </div>
<!--             <h1 id="hej">Test</h1>
            <h1 id="hej2">Test</h1>
            <h1 id="hej3">Test</h1>
            <h1 id="hej4">Test</h1> -->
<!--             <button id="req" >Request orientation permission</button>
            <button id="remove" onclick="removeHandler()">Remove</button> -->
<!--             <div class="test">
                <div class="btn">Letter</div>
                <div class="btn">Number</div>
                <div class="btn">Word</div>
                <div class="btn">Title</div>
            </div>
            <div class="test">
                <div class="btn">Sentence</div>
                <div class="btn">Pangam</div>
                <div class="btn">Text</div>
                <div class="btn">Set</div>
            </div> -->
            

        </div>
    </div>
    <div id="edit" onclick="toggleIcon()">
        <img src="icons/Controller.svg"/>
    </div>
    <div id="editable" contenteditable="true" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
       Untitled <br> Sans.
    </div>

    <div class="color-selection">
        <div onclick="removeHandler()" class="palette-dark"></div>
        <div id="req" class="palette"></div>
      </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script>
    document.getElementById('letter-spacing').value = 0;
    document.getElementById('font-size').value = 82;
    document.getElementById('line-height').value = 1;

    
    var i = -1;
    function toggleIcon() {
        i++;
        if (i == 0) {
            document.getElementById('edit').innerHTML = "";
            document.getElementById('edit').innerHTML = "<svg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M1 19.0312L19.0312 0.999997' stroke='var(--bg)' stroke-width='2'/><path d='M1 1L19.0312 19.0312' stroke='var(--bg)' stroke-width='2'/></svg>";
        }
        else if (i == 1) {
            document.getElementById('edit').innerHTML = "";
            document.getElementById('edit').innerHTML = "<svg width='26' height='26' viewBox='0 0 26 26' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M0 4H25.5' stroke='black' stroke-width='2'/><circle cx='5' cy='4' r='4' fill='black'/><circle cx='5' cy='4' r='2' fill='#cecece'/><path d='M0 13H25.5' stroke='black' stroke-width='2'/><circle cx='13' cy='13' r='4' fill='black'/><circle cx='13' cy='13' r='2' fill='#cecece'/><path d='M0 22H25.5' stroke='black' stroke-width='2'/><circle cx='20' cy='22' r='4' fill='black'/><circle cx='20' cy='22' r='2' fill='#cecece'/></svg>";
            i = -1; 
        }
    }

    var tl = gsap.timeline();

    tl.to("#editable", {
        height: "50%",
        ease: "Power4. easeOut",
    }, "start");

    tl.to("#controller", {
        top: "50vh",
        opacity: 1,
        ease: "Power4. easeOut",
    }, "start");

    tl.to("#edit", {
        top: "calc(50vh - 58px)",
    }, "start");

    tl.reverse();

    function menu() {
        tl.reversed(!tl.reversed());
    }

    document.getElementById("edit").addEventListener("click", menu); 

    let letterSpacing = document.getElementById('letter-spacing');
    letterSpacing.addEventListener('input', function () {
        document.getElementById('editable').style.letterSpacing = letterSpacing.value+"px";
    }, false);

    let lineHeight = document.getElementById('line-height');
    lineHeight.addEventListener('input', function () {
        document.getElementById('editable').style.lineHeight = lineHeight.value;
    }, false);

    let fontSize = document.getElementById('font-size');
    fontSize.addEventListener('input', function () {
        document.getElementById('editable').style.fontSize = fontSize.value+"px";
    }, false);
	


    function f() {
        const alpha = event.alpha;
        const beta = Math.abs(event.beta);

        // debugging purposes only:
/*         document.getElementById("hej").innerHTML = Math.round(alpha); 
        document.getElementById("hej2").innerHTML =  Math.round((beta / 180) * 100);

        document.getElementById("hej3").innerHTML =  (180 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        document.getElementById("hej4").innerHTML =  (50 + Math.round((beta/ 180) * 100)) % 100;  */
        
        var bgHue = Math.round(alpha); 
        var bgLightness =  Math.round((beta / 180) * 100); 
        var colorHue = (180 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        var colorLightness =  (50 + Math.round((beta/ 180) * 100)) % 100; 
        var colorTri = (220 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        var colorTriS = (140 + Math.round((alpha / 360) * 100 * 3.6 )) % 360; 
        

        document.documentElement.style.setProperty("--color", `hsl(${colorHue}, 100%, ${colorLightness}%)`);
        document.documentElement.style.setProperty("--bg", `hsl(${bgHue}, 100%, ${bgLightness}%)`);
        document.documentElement.style.setProperty("--border-color", `hsl(${colorTri}, 100%, ${colorLightness}%)`);
        document.documentElement.style.setProperty("--slider-thumb", `hsl(${colorHue}, 100%, ${colorLightness}%)`);
        document.documentElement.style.setProperty("--edit", `hsl(${colorTriS}, 100%, ${colorLightness}%)`);


    }
	
    function requestOrientationPermission(){
        DeviceOrientationEvent.requestPermission()
        .then(response => {
            if (response == 'granted') {
                window.addEventListener('deviceorientation', f)
            }
        })
        .catch(console.error)
    }

    document.getElementById("req").addEventListener("click", requestOrientationPermission);

    function removeHandler() {
        console.log('fire');
        window.removeEventListener('deviceorientation', f);
        document.documentElement.style.setProperty("--color", `#000`);
        document.documentElement.style.setProperty("--bg", `#cecece`);
        document.documentElement.style.setProperty("--border-color", `#000`);
        document.documentElement.style.setProperty("--slider-thumb", `#cecece`);

    }






	







</script>
</body>
</html>
